<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ƒê∆°n h√†ng</title>
  <link rel="stylesheet" href="../css/bootstrap.min.css">
  <link rel="stylesheet" href="../css/home.css">
  <script src="../js/bootstrap.min.js"></script>
  <script src="../js/jquery-3.7.1.min.js"></script>
  <style>
    main {
      padding: 30px;
    }
  </style>
</head>
<body>
  <header class="navbar navbar-expand-lg navbar-light py-3">
    <div class="container-fluid px-5">
      <a class="navbar-brand" href="../index.html">
        <img alt="logo" src="../img/logo1.png" style="height: 200px;"/>
        <div class="brand-text">
          <span class="brand-title">LUNAR</span>
          <span class="brand-tagline">Soft as moonlight.</span>
        </div>
      </a>
    <button class="navbar-toggler" data-bs-target="#navbarNav" data-bs-toggle="collapse" type="button">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0 navigation">
        <li class="nav-item">
          <a class="nav-link" href="../index.html">Trang ch·ªß</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="../html/products.html" id="productDropdown" role="button">S·∫£n ph·∫©m</a>
          <ul aria-labelledby="productDropdown" class="dropdown-menu"><li><a class="dropdown-item" href="products.html?cat=bbnhua">B√∫p b√™ nh·ª±a</a></li><li><a class="dropdown-item" href="products.html?cat=bbvai">B√∫p b√™ v·∫£i</a></li><li><a class="dropdown-item" href="products.html?cat=thubong">Th√∫ b√¥ng</a></li></ul>
          <li class="nav-item">
            <a class="nav-link" href="../html/about.html">V·ªÅ ch√∫ng t√¥i</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" href="../html/shipping.html">ƒê∆°n h√†ng</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../html/login.html">ƒêƒÉng nh·∫≠p</a>
          </li>
        </li>
      </ul>
      <a class="btn btn-warning" href="../html/cart.html">Gi·ªè h√†ng</a>
      </div>
    </div>
  </header>

  <main>
    <h2 class="text-center mb-4">üöö ƒê∆°n h√†ng c·ªßa b·∫°n</h2>
    <div class="table-responsive">
      <table class="table table-bordered table-hover align-middle text-center">
        <thead class="table-warning">
          <tr>
            <th>T√™n s·∫£n ph·∫©m</th>
            <th>S·ªë l∆∞·ª£ng</th>
            <th>Gi√°</th>
            <th>Tr·∫°ng th√°i</th>
          </tr>
        </thead>
        <tbody id="orderList"></tbody>
      </table>
    </div>
  </main>

  <footer class="bg-dark py-5">
    <div class="container">
      <div class="row">
        <div class="col-md-3">
          <h5 class="text-danger">Lunar Shop</h5>
          <p class="text-info">Th·∫ø gi·ªõi c·ªßa b√∫p b√™ v√† th√∫ b√¥ng ƒë√°ng y√™u!</p>
        </div>
        <div class="col-md-3">
          <h5 class="text-danger">Quick Links</h5>
          <ul class="list-unstyled">
            <li><a class="text-success" href="../index.html">Home</a></li>
            <li><a class="text-success" href="../products.html">Products</a></li>
            <li><a class="text-success" href="../about.html">About</a></li>
          </ul>
        </div>
        <div class="col-md-3">
          <h5 class="text-danger">Our Services</h5>
          <ul class="list-unstyled">
            <li><a class="text-primary" href="../shipping.html">Shipping</a></li>
            <li><a class="text-primary" href="../cart.html">Cart</a></li>
            <li><a class="text-primary" href="../checkout.html">Checkout</a></li>
          </ul>
        </div>
        <div class="col-md-3">
          <h5>Nh·∫≠n th√¥ng b√°o v·ªÅ s·∫£n ph·∫©m m·ªõi</h5>
          <form id="footerSubscribeForm">
            <input class="form-control mb-2" id="footerSubscribeEmail" placeholder="Enter your email" required="" type="email"/>
            <button class="btn btn-warning w-100" type="submit">Submit</button>
          </form>
        </div>
      </div>
    </div>
  </footer>
    <div aria-hidden="true" class="modal fade" id="footerThankModal" tabindex="-1">
      <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-body text-center">
            <h5 class="mb-3">C·∫£m ∆°n b·∫°n ƒë√£ ƒëƒÉng k√Ω!</h5>
            <p>Khi c√≥ s·∫£n ph·∫©m m·ªõi, ch√∫ng t√¥i s·∫Ω g·ª≠i th√¥ng b√°o ƒë·∫øn b·∫°n.</p>
            <button class="btn btn-primary" data-bs-dismiss="modal" type="button">ƒê√≥ng</button>
          </div>
        </div>
      </div>
    </div>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      if (localStorage.getItem("userLoggedIn") !== "true") {
        const modal = document.createElement("div");
        modal.className = "modal fade";
        modal.id = "loginRequiredModal";
        modal.tabIndex = -1;
        modal.innerHTML = `
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title">Y√™u c·∫ßu ƒëƒÉng nh·∫≠p</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
              </div>
              <div class="modal-body text-center">
                <p>B·∫°n c·∫ßn ƒëƒÉng nh·∫≠p ƒë·ªÉ xem ƒë∆°n h√†ng.</p>
              </div>
              <div class="modal-footer justify-content-center">
                <button id="loginBtn" class="btn btn-primary">ƒêƒÉng nh·∫≠p</button>
                <button id="backBtn" class="btn btn-secondary">Quay l·∫°i</button>
              </div>
            </div>
          </div>
        `;
        document.body.appendChild(modal);

        const bsModal = new bootstrap.Modal(document.getElementById("loginRequiredModal"));
        bsModal.show();

        document.getElementById("loginBtn").addEventListener("click", function () {
          window.location.href = "login.html";
        });

        document.getElementById("backBtn").addEventListener("click", function () {
          window.location.href = "home.html";
        });
      }
    });
        document.addEventListener("DOMContentLoaded", function () {
      const navLogin = document.querySelector(".nav-link[href*='login.html']");
      const storedName = localStorage.getItem("loggedUsername");

      if (localStorage.getItem("userLoggedIn") === "true" && storedName && navLogin) {
        navLogin.innerText = storedName;
        navLogin.style.backgroundColor = "#90ee90"; 
        navLogin.style.color = "black"; 

        navLogin.addEventListener("mouseenter", function () {
          navLogin.innerText = "ƒêƒÉng xu·∫•t";
          navLogin.style.cursor = "pointer";
        });

        navLogin.addEventListener("mouseleave", function () {
          navLogin.innerText = storedName;
        });

        navLogin.addEventListener("click", function (e) {
          e.preventDefault();
          localStorage.removeItem("userLoggedIn");
          localStorage.removeItem("loggedUsername");
          window.location.reload();
        });
      }
    });
        document.addEventListener("DOMContentLoaded", function () {
          const invoice = JSON.parse(localStorage.getItem("invoiceData"));
          const orderList = document.getElementById("orderList");

          if (!invoice || !invoice.cart || invoice.cart.length === 0) {
            orderList.innerHTML = `<tr><td colspan="4" class="text-danger">Kh√¥ng c√≥ ƒë∆°n h√†ng n√†o!</td></tr>`;
            return;
          }

          invoice.cart.forEach(item => {
            const price = typeof item.price === 'number' ? item.price : parseInt(item.price.replace(/\D/g, ""));
            const row = document.createElement("tr");
            row.innerHTML = `
              <td>${item.title}</td>
              <td>${item.quantity}</td>
              <td>${(price * item.quantity).toLocaleString()}ƒë</td>
              <td><span class="badge bg-info text-dark">ƒê∆°n h√†ng ƒëang ƒë∆∞·ª£c chu·∫©n b·ªã</span></td>
            `;
            orderList.appendChild(row);
          });
        });
        document.addEventListener("DOMContentLoaded", function () {
          const footerForm = document.getElementById("footerSubscribeForm");
          const footerEmail = document.getElementById("footerSubscribeEmail");
        
          footerForm?.addEventListener("submit", function (e) {
            e.preventDefault();
            const email = footerEmail.value.trim();
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        
            if (re.test(email)) {
              const modal = new bootstrap.Modal(document.getElementById("footerThankModal"));
              modal.show();
              footerForm.reset();
            } else {
              footerEmail.classList.add("is-invalid");
              if (!footerEmail.nextElementSibling || !footerEmail.nextElementSibling.classList.contains("invalid-feedback")) {
                const error = document.createElement("div");
                error.className = "invalid-feedback";
                error.innerText = "Vui l√≤ng nh·∫≠p email h·ª£p l·ªá.";
                footerEmail.parentNode.insertBefore(error, footerEmail.nextSibling);
              }
            }
          });
        
          footerEmail?.addEventListener("input", function () {
            footerEmail.classList.remove("is-invalid");
            const error = footerEmail.parentNode.querySelector(".invalid-feedback");
            if (error) error.remove();
          });
        });
  </script>
</body>
</html>
